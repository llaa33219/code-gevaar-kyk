<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì½”ë“œ ë³´ì•ˆ ë¶„ì„ê¸°</title>
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    /* ========================================
       CSS Variables - Design System
    ======================================== */
    :root {
      /* Primary Colors */
      --primary-50: #eef6ff;
      --primary-100: #b9d6fd;
      --primary-500: #007BFF;
      --primary-600: #005BDD;
      --primary-700: #193694;
      
      /* Secondary Colors */
      --secondary-50: #e3ffe3;
      --secondary-500: #00d200;
      --secondary-600: #00a100;
      
      /* Neutral Colors */
      --white: #ffffff;
      --gray-50: #fafafa;
      --gray-100: #f5f5f5;
      --gray-200: #e8e8e8;
      --gray-300: #d6d6d6;
      --gray-400: #a6a6a6;
      --gray-500: #757575;
      --gray-600: #575757;
      --gray-700: #454545;
      --gray-800: #2b2b2b;
      --gray-900: #1c1c1c;
      --black: #000000;
      
      /* Semantic Colors */
      --success: #00ef38;
      --warning: #ffdd00;
      --error: #df0013;
      --info: #c9c9c9;
      
      /* Typography */
      --font-primary: "CloudSansCode", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      --font-mono: 'Fira Code', 'Monaco', 'Menlo', monospace;
      
      /* Font Sizes */
      --text-display: 72px;
      --text-h1: 56px;
      --text-h2: 36px;
      --text-h3: 28px;
      --text-h4: 24px;
      --text-h5: 20px;
      --text-h6: 18px;
      --text-body-xl: 20px;
      --text-body-lg: 30px;
      --text-body: 22px;
      --text-body-sm: 16px;
      --text-caption: 12px;
      
      /* Font Weights */
      --font-light: 300;
      --font-regular: 400;
      --font-medium: 500;
      --font-semibold: 600;
      --font-bold: 700;
      --font-extrabold: 800;
      
      /* Spacing */
      --space-xs: 4px;
      --space-sm: 8px;
      --space-md: 16px;
      --space-lg: 24px;
      --space-xl: 32px;
      --space-2xl: 48px;
      --space-3xl: 64px;
      --space-4xl: 80px;
      --space-5xl: 96px;
      --space-6xl: 128px;
      
      /* Shadows (Hard Shadow - Neobrutalism) */
      --shadow-xs: 8px 8px 0px rgba(0,0,0,0.2);
      --shadow-sm: 2px 2px 0px rgba(0,0,0,0.2);
      --shadow-md: 4px 4px 0px rgba(0,0,0,0.2);
      --shadow-lg: 10px 10px 0px rgba(0,0,0,0.2);
      --shadow-xl: 20px 20px 0px rgba(0,0,0,0.2);
      --shadow-2xl: 25px 25px 0px rgba(0,0,0,0.2);
      
      /* Border Radius */
      --radius-sm: 14px;
      --radius-md: 20px;
      --radius-lg: 26px;
      --radius-xl: 30px;
      --radius-full: 9999px;
      
      /* Transitions */
      --duration-fast: 0.15s;
      --duration-normal: 0.3s;
      --duration-slow: 0.5s;
      --easing: ease;
      
      /* Layout */
      --container-max-width: 1280px;
      --container-padding: var(--space-xl);
      --navbar-height: 72px;
    }
    
    /* Custom Font */
    @font-face {
      font-family: 'CloudSansCode';
      src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/2408@1.0/goorm-sans-code.woff2') format('woff2');
      font-weight: 100 900;
      font-display: swap;
    }

    /* ========================================
       Reset & Base
    ======================================== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* Accessibility - Focus Visible */
    :focus-visible {
      outline: 3px solid var(--primary-500);
      outline-offset: 2px;
    }

    /* Reduced Motion */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        transition-duration: 0.01ms !important;
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
      }
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: var(--font-primary);
      font-size: var(--text-body);
      font-weight: var(--font-regular);
      line-height: 1.6;
      background: var(--gray-50);
      color: var(--gray-800);
      min-height: 100vh;
    }

    /* ========================================
       Utility Classes
    ======================================== */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    .container {
      max-width: var(--container-max-width);
      margin: 0 auto;
      padding: 0 var(--container-padding);
    }

    /* ========================================
       Navigation Bar
    ======================================== */
    .navbar {
      position: sticky;
      top: 0;
      left: 0;
      right: 0;
      height: var(--navbar-height);
      background: var(--white);
      box-shadow: var(--shadow-xs);
      z-index: 100;
      display: flex;
      align-items: center;
    }

    .navbar .container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
    }

    .navbar-logo {
      font-size: var(--text-h4);
      font-weight: var(--font-bold);
      color: var(--primary-500);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    .navbar-logo:hover {
      color: var(--primary-600);
    }

    .navbar-nav {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      list-style: none;
    }

    .navbar-link {
      padding: var(--space-sm) var(--space-md);
      font-size: var(--text-body);
      font-weight: var(--font-bold);
      color: var(--gray-600);
      text-decoration: none;
      border-radius: var(--radius-sm);
      transition: all var(--duration-fast) var(--easing);
    }

    .navbar-link:hover,
    .navbar-link.active {
      color: var(--primary-500);
    }

    /* ========================================
       Hero Section
    ======================================== */
    .hero {
      padding: var(--space-4xl) 0;
      text-align: center;
    }

    .hero-title {
      font-size: var(--text-h1);
      font-weight: var(--font-extrabold);
      color: var(--gray-900);
      margin-bottom: var(--space-md);
      line-height: 1.1;
    }

    .hero-title .highlight {
      color: var(--primary-500);
      position: relative;
    }

    .hero-subtitle {
      font-size: var(--text-body-lg);
      color: var(--gray-500);
      max-width: 700px;
      margin: 0 auto var(--space-2xl);
    }

    /* ========================================
       Alert / Warning Banner
    ======================================== */
    .alert {
      padding: var(--space-md);
      border-radius: var(--radius-md);
      font-size: var(--text-body);
      margin-bottom: var(--space-lg);
      display: flex;
      align-items: flex-start;
      gap: var(--space-md);
    }

    .alert-warning {
      background: #f3c81e;
      box-shadow: 8px 8px 0px #dbac2c;
      color: var(--gray-900);
    }

    .alert-info {
      background: #b9b9b9;
      box-shadow: 8px 8px 0px #767676;
      color: var(--white);
    }

    .alert-icon {
      font-size: var(--text-h4);
      flex-shrink: 0;
    }

    .alert-content {
      flex: 1;
    }

    .alert-title {
      font-weight: var(--font-bold);
      margin-bottom: var(--space-xs);
    }

    /* ========================================
       Main Layout
    ======================================== */
    .main-section {
      padding: var(--space-2xl) 0 var(--space-4xl);
    }

    .main-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-lg);
    }

    /* ========================================
       Cards
    ======================================== */
    .card {
      background: var(--white);
      border: 1px solid var(--gray-200);
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      box-shadow: var(--shadow-sm);
      transition: all var(--duration-slow) var(--easing);
    }

    .card:hover {
      box-shadow: var(--shadow-lg);
      transform: translateY(-10px);
    }

    .card-highlight {
      border: 5px solid var(--primary-500);
    }

    .card-static {
      transition: none;
    }

    .card-static:hover {
      transform: none;
      box-shadow: var(--shadow-sm);
    }

    .card-header {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      margin-bottom: var(--space-md);
    }

    .card-icon {
      font-size: var(--text-h3);
    }

    .card-title {
      font-size: var(--text-h5);
      font-weight: var(--font-semibold);
      color: var(--gray-800);
    }

    /* ========================================
       Buttons
    ======================================== */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-sm);
      padding: 10px 20px;
      font-family: var(--font-primary);
      font-size: var(--text-body);
      font-weight: var(--font-semibold);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all var(--duration-normal) var(--easing);
      text-decoration: none;
      border: none;
    }

    .btn-primary {
      background: var(--primary-500);
      color: var(--white);
      box-shadow: var(--shadow-xs);
    }

    .btn-primary:hover:not(:disabled) {
      background: var(--primary-600);
      box-shadow: var(--shadow-sm);
      transform: translateY(6px);
    }

    .btn-primary:active:not(:disabled) {
      background: var(--primary-700);
      transform: translateY(8px);
      box-shadow: 0px 0px 0px rgba(0,0,0,0.2);
    }

    .btn-secondary {
      background: transparent;
      color: var(--primary-500);
      border: 2px solid var(--primary-500);
      padding: 10px 22px;
    }

    .btn-secondary:hover:not(:disabled) {
      box-shadow: var(--shadow-xs);
      transform: translateY(-8px);
    }

    .btn-lg {
      padding: 16px 32px;
      font-size: var(--text-body-lg);
    }

    .btn-sm {
      padding: 8px 16px;
      font-size: var(--text-body-sm);
    }

    .btn-full {
      width: 100%;
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    /* ========================================
       Form Elements
    ======================================== */
    .form-group {
      margin-bottom: var(--space-md);
    }

    .form-label {
      display: block;
      font-size: var(--text-body-sm);
      font-weight: var(--font-semibold);
      color: var(--gray-700);
      margin-bottom: var(--space-sm);
    }

    .form-input,
    .form-textarea {
      width: 100%;
      background: var(--white);
      border: 1px solid var(--gray-300);
      border-radius: var(--radius-md);
      padding: 12px 16px;
      font-family: var(--font-mono);
      font-size: var(--text-body);
      color: var(--gray-900);
      transition: all var(--duration-normal) var(--easing);
    }

    .form-input::placeholder,
    .form-textarea::placeholder {
      color: var(--gray-400);
    }

    .form-input:focus,
    .form-textarea:focus {
      outline: none;
      box-shadow: var(--shadow-xs);
      transform: translateY(-8px);
      border-color: var(--primary-500);
    }

    .form-textarea {
      min-height: 300px;
      resize: vertical;
      line-height: 1.5;
    }

    /* ========================================
       File Upload
    ======================================== */
    .file-upload {
      margin-top: var(--space-md);
      padding: var(--space-lg);
      border: 2px dashed var(--gray-300);
      border-radius: var(--radius-md);
      text-align: center;
      cursor: pointer;
      transition: all var(--duration-normal) var(--easing);
    }

    .file-upload:hover,
    .file-upload:focus {
      border-color: var(--primary-500);
      background: var(--primary-50);
      box-shadow: var(--shadow-xs);
      transform: translateY(-8px);
      outline: none;
    }

    .file-upload input {
      display: none;
    }

    .file-upload-icon {
      font-size: var(--text-h2);
      margin-bottom: var(--space-sm);
    }

    .file-upload-text {
      font-size: var(--text-body);
      color: var(--gray-700);
      margin-bottom: var(--space-xs);
    }

    .file-upload-hint {
      font-size: var(--text-body-sm);
      color: var(--gray-400);
    }

    /* ========================================
       Result Panel
    ======================================== */
    .result-panel {
      min-height: 500px;
      display: flex;
      flex-direction: column;
    }

    .result-content {
      flex: 1;
      background: var(--gray-100);
      border-radius: var(--radius-md);
      padding: var(--space-md);
      overflow-y: auto;
      font-size: var(--text-body-sm);
      line-height: 1.7;
      max-height: 500px;
    }

    .result-content::-webkit-scrollbar {
      width: 8px;
    }

    .result-content::-webkit-scrollbar-track {
      background: var(--gray-200);
      border-radius: var(--radius-sm);
    }

    .result-content::-webkit-scrollbar-thumb {
      background: var(--gray-400);
      border-radius: var(--radius-sm);
    }

    .result-content::-webkit-scrollbar-thumb:hover {
      background: var(--gray-500);
    }

    /* ========================================
       Thinking Block
    ======================================== */
    .thinking-block {
      background: var(--primary-50);
      border-left: 4px solid var(--primary-500);
      border-radius: var(--radius-sm);
      padding: var(--space-md);
      margin-bottom: var(--space-md);
    }

    .thinking-label {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      font-weight: var(--font-bold);
      color: var(--primary-600);
      margin-bottom: var(--space-sm);
    }

    .thinking-content {
      color: var(--gray-600);
      font-style: italic;
      white-space: pre-wrap;
      word-break: break-word;
    }

    /* ========================================
       Answer Block
    ======================================== */
    .answer-block {
      color: var(--gray-800);
      white-space: pre-wrap;
      word-break: break-word;
    }

    /* ========================================
       Final Result
    ======================================== */
    .final-result {
      margin-top: var(--space-lg);
      padding: var(--space-xl);
      background: var(--white);
      border-radius: var(--radius-lg);
      text-align: center;
      border: 3px solid var(--gray-200);
    }

    .risk-label {
      font-size: var(--text-h5);
      font-weight: var(--font-semibold);
      margin-bottom: var(--space-sm);
    }

    .risk-score {
      font-size: var(--text-display);
      font-weight: var(--font-extrabold);
      margin: var(--space-sm) 0;
      font-family: var(--font-mono);
    }

    .risk-low { 
      color: var(--success); 
    }
    
    .risk-medium { 
      color: var(--warning); 
    }
    
    .risk-high { 
      color: #e55050;
    }
    
    .risk-critical { 
      color: var(--error); 
    }

    .risk-comment {
      font-size: var(--text-body);
      color: var(--gray-500);
      font-style: italic;
    }

    /* ========================================
       Empty State
    ======================================== */
    .empty-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      min-height: 300px;
      color: var(--gray-400);
    }

    .empty-state-icon {
      font-size: 80px;
      margin-bottom: var(--space-md);
    }

    .empty-state-text {
      font-size: var(--text-body);
    }

    /* ========================================
       Loading States
    ======================================== */
    .loading {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-md);
      padding: var(--space-2xl);
      color: var(--gray-500);
    }

    .spinner {
      width: 28px;
      height: 28px;
      border: 4px solid var(--primary-100);
      border-top-color: var(--primary-500);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* ========================================
       Badges
    ======================================== */
    .badge {
      display: inline-flex;
      align-items: center;
      padding: var(--space-xs) 12px;
      border-radius: var(--radius-full);
      font-size: var(--text-body-sm);
      font-weight: var(--font-medium);
    }

    .badge-primary {
      background: var(--primary-500);
      color: var(--white);
    }

    .badge-success {
      background: #29c54d;
      color: var(--white);
    }

    .badge-warning {
      background: #f3c81e;
      color: var(--white);
    }

    .badge-error {
      background: #e12e2e;
      color: var(--white);
    }

    /* ========================================
       Footer
    ======================================== */
    .footer {
      padding: var(--space-xl) 0;
      text-align: center;
      color: var(--gray-500);
      font-size: var(--text-body-sm);
      border-top: 1px solid var(--gray-200);
      margin-top: var(--space-3xl);
    }

    /* ========================================
       Error Message
    ======================================== */
    .error-message {
      background: #fef2f2;
      border: 2px solid var(--error);
      border-radius: var(--radius-md);
      padding: var(--space-lg);
      color: var(--error);
      text-align: center;
    }

    /* ========================================
       Responsive Design
    ======================================== */
    @media (max-width: 1023px) {
      :root {
        --text-h1: 42px;
        --text-h2: 32px;
        --text-body-lg: 24px;
      }

      .main-grid {
        grid-template-columns: 1fr 1fr;
        gap: var(--space-md);
      }
    }

    @media (max-width: 639px) {
      :root {
        --text-h1: 36px;
        --text-h2: 28px;
        --text-h3: 24px;
        --text-body-lg: 20px;
        --text-body: 18px;
        --container-padding: var(--space-md);
      }

      .navbar-nav {
        display: none;
      }

      .hero {
        padding: var(--space-2xl) 0;
      }

      .hero-subtitle {
        font-size: var(--text-body);
      }

      .main-grid {
        grid-template-columns: 1fr;
        gap: var(--space-lg);
      }

      .main-section {
        padding: var(--space-lg) 0 var(--space-2xl);
      }

      .result-panel {
        min-height: 400px;
      }

      .result-content {
        max-height: 400px;
      }

      .form-textarea {
        min-height: 200px;
      }

      .risk-score {
        font-size: 56px;
      }

      .final-result {
        padding: var(--space-lg);
      }

      .card {
        padding: var(--space-md);
      }

      .card:hover {
        transform: none;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation Bar -->
  <nav class="navbar">
    <div class="container">
      <a href="#" class="navbar-logo">
        <span>ğŸ›¡ï¸</span>
        <span>ì½”ë“œ ë³´ì•ˆ ë¶„ì„ê¸°</span>
      </a>
      <ul class="navbar-nav">
        <li><a href="#analyzer" class="navbar-link active">ë¶„ì„í•˜ê¸°</a></li>
      </ul>
    </div>
  </nav>

  <main>
    <!-- Hero Section -->
    <section class="hero">
      <div class="container">
        <h1 class="hero-title">
          AIë¡œ <span class="highlight">ì•…ì„± ì½”ë“œ</span>ë¥¼<br>íƒì§€í•˜ì„¸ìš”
        </h1>
        <p class="hero-subtitle">
          DeepSeek AIê°€ ì½”ë“œë¥¼ ë¶„ì„í•˜ì—¬ ê³„ì • íƒˆì·¨, ë°ì´í„° ìœ ì¶œ ë“± ì ì¬ì  ìœ„í˜‘ì„ íƒì§€í•©ë‹ˆë‹¤
        </p>
      </div>
    </section>

    <!-- Main Content -->
    <section class="main-section" id="analyzer">
      <div class="container">
        <!-- Warning Banner -->
        <div class="alert alert-warning">
          <span class="alert-icon">âš ï¸</span>
          <div class="alert-content">
            <div class="alert-title">ì£¼ì˜ì‚¬í•­</div>
            <div>ì´ ë„êµ¬ëŠ” AI ê¸°ë°˜ ë¶„ì„ì„ ì œê³µí•˜ë©°, 100% ì •í™•í•œ íƒì§€ë¥¼ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì˜ì‹¬ìŠ¤ëŸ¬ìš´ ì½”ë“œëŠ” ì ˆëŒ€ ì‹¤í–‰í•˜ì§€ ë§ˆì„¸ìš”.</div>
          </div>
        </div>

        <div class="main-grid">
          <!-- Input Panel -->
          <div class="card card-highlight card-static">
            <div class="card-header">
              <span class="card-icon">ğŸ“</span>
              <h2 class="card-title">ì½”ë“œ ì…ë ¥</h2>
            </div>
            
            <div class="form-group">
              <label for="codeInput" class="sr-only">ë¶„ì„í•  ì½”ë“œ ì…ë ¥</label>
              <textarea 
                id="codeInput" 
                class="form-textarea" 
                placeholder="ë¶„ì„í•  ì½”ë“œë¥¼ ì—¬ê¸°ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”..."
                aria-label="ë¶„ì„í•  ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”"
              ></textarea>
            </div>

            <div 
              class="file-upload" 
              tabindex="0" 
              role="button" 
              aria-label="íŒŒì¼ ì—…ë¡œë“œ" 
              id="fileUploadArea"
            >
              <input 
                type="file" 
                id="fileInput" 
                accept=".js,.ts,.jsx,.tsx,.py,.php,.html,.css,.json,.txt" 
                aria-label="ì½”ë“œ íŒŒì¼ ì„ íƒ"
              >
              <div class="file-upload-icon">ğŸ“</div>
              <div class="file-upload-text" id="fileUploadText">íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</div>
              <div class="file-upload-hint">.js, .ts, .jsx, .tsx, .py, .php, .html, .css, .json, .txt</div>
            </div>

            <button class="btn btn-primary btn-lg btn-full" id="analyzeBtn" style="margin-top: var(--space-lg);">
              <span>ğŸ”</span>
              <span>ë¶„ì„ ì‹œì‘</span>
            </button>
          </div>

          <!-- Result Panel -->
          <div class="card result-panel card-static">
            <div class="card-header">
              <span class="card-icon">ğŸ“Š</span>
              <h2 class="card-title">ë¶„ì„ ê²°ê³¼</h2>
            </div>
            <div class="result-content" id="resultContent" aria-live="polite" aria-atomic="false">
              <div class="empty-state">
                <div class="empty-state-icon">ğŸ”</div>
                <div class="empty-state-text">ì½”ë“œë¥¼ ì…ë ¥í•˜ê³  ë¶„ì„ì„ ì‹œì‘í•˜ì„¸ìš”</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <p>Â© 2024 ì½”ë“œ ë³´ì•ˆ ë¶„ì„ê¸° Â· AI ê¸°ë°˜ ë³´ì•ˆ ë¶„ì„ ë„êµ¬</p>
    </div>
  </footer>

  <script>
    (function() {
      var codeInput = document.getElementById("codeInput");
      var fileInput = document.getElementById("fileInput");
      var analyzeBtn = document.getElementById("analyzeBtn");
      var resultContent = document.getElementById("resultContent");
      var fileUploadArea = document.getElementById("fileUploadArea");

      // File upload click handler
      fileUploadArea.addEventListener("click", function() {
        fileInput.click();
      });

      // Keyboard accessibility for file upload
      fileUploadArea.addEventListener("keypress", function(e) {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          fileInput.click();
        }
      });

      // File input change handler
      fileInput.addEventListener("change", function(e) {
        var file = e.target.files[0];
        if (file) {
          file.text().then(function(text) {
            codeInput.value = text;
            document.getElementById("fileUploadText").textContent = "âœ… " + file.name + " ë¡œë“œë¨";
          });
        }
      });

      // Drag and drop handlers
      fileUploadArea.addEventListener("dragover", function(e) {
        e.preventDefault();
        fileUploadArea.style.borderColor = "var(--primary-500)";
        fileUploadArea.style.background = "var(--primary-50)";
      });

      fileUploadArea.addEventListener("dragleave", function() {
        fileUploadArea.style.borderColor = "";
        fileUploadArea.style.background = "";
      });

      fileUploadArea.addEventListener("drop", function(e) {
        e.preventDefault();
        fileUploadArea.style.borderColor = "";
        fileUploadArea.style.background = "";
        var file = e.dataTransfer.files[0];
        if (file) {
          file.text().then(function(text) {
            codeInput.value = text;
            document.getElementById("fileUploadText").textContent = "âœ… " + file.name + " ë¡œë“œë¨";
          });
        }
      });

      // Analyze button click handler
      analyzeBtn.addEventListener("click", function() {
        analyzeCode();
      });

      function analyzeCode() {
        var code = codeInput.value.trim();
        
        if (!code) {
          alert("ë¶„ì„í•  ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
          return;
        }

        analyzeBtn.disabled = true;
        analyzeBtn.innerHTML = '<span class="spinner"></span> <span>ë¶„ì„ ì¤‘...</span>';
        
        resultContent.innerHTML = '<div class="loading"><span class="spinner"></span> <span>AIê°€ ì½”ë“œë¥¼ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...</span></div>';

        var reasoningText = "";
        var answerText = "";

        fetch("/api/analyze", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ code: code })
        })
        .then(function(response) {
          if (!response.ok) {
            return response.json().then(function(err) {
              throw new Error(err.error || "ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            });
          }
          return response;
        })
        .then(function(response) {
          var reader = response.body.getReader();
          var decoder = new TextDecoder();
          var buffer = "";

          function processStream() {
            return reader.read().then(function(result) {
              if (result.done) {
                updateResult(reasoningText, answerText, true);
                return;
              }

              buffer += decoder.decode(result.value, { stream: true });
              var lines = buffer.split("\n");
              buffer = lines.pop() || "";

              for (var i = 0; i < lines.length; i++) {
                var line = lines[i];
                if (line.indexOf("data: ") === 0) {
                  var data = line.slice(6);
                  if (data === "[DONE]") continue;
                  
                  try {
                    var parsed = JSON.parse(data);
                    if (parsed.error) {
                      throw new Error(parsed.error);
                    }
                    if (parsed.reasoning) {
                      reasoningText += parsed.reasoning;
                    }
                    if (parsed.content) {
                      answerText += parsed.content;
                    }
                    updateResult(reasoningText, answerText, false);
                  } catch (e) {
                    if (e.message && e.message !== "Unexpected end of JSON input") {
                      throw e;
                    }
                  }
                }
              }

              return processStream();
            });
          }

          return processStream();
        })
        .catch(function(error) {
          resultContent.innerHTML = '<div class="error-message">âŒ ' + escapeHtml(error.message) + '</div>';
        })
        .finally(function() {
          analyzeBtn.disabled = false;
          analyzeBtn.innerHTML = '<span>ğŸ”</span> <span>ë¶„ì„ ì‹œì‘</span>';
        });
      }

      function updateResult(reasoning, answer, isFinal) {
        var html = "";

        if (reasoning) {
          html += '<div class="thinking-block">';
          html += '<div class="thinking-label"><span>ğŸ§ </span> <span>AI ì‚¬ê³  ê³¼ì •</span></div>';
          html += '<div class="thinking-content">' + escapeHtml(reasoning) + '</div>';
          html += '</div>';
        }

        if (answer) {
          html += '<div class="answer-block">' + escapeHtml(answer) + '</div>';
        }

        if (isFinal && answer) {
          var finalResult = parseFinalResult(answer);
          if (finalResult) {
            html += renderFinalResult(finalResult);
          }
        }

        resultContent.innerHTML = html || '<div class="loading"><span class="spinner"></span> <span>ë¶„ì„ ì¤‘...</span></div>';
        resultContent.scrollTop = resultContent.scrollHeight;
      }

      function parseFinalResult(text) {
        var regex = /\[ìµœì¢… ê²°ê³¼\][\s\S]*?ì•…ì„±ì½”ë“œì¼ ê°€ëŠ¥ì„±:\s*(\d+)\/100[\s\S]*?"([^"]+)"[\s\S]*?\[\/ìµœì¢… ê²°ê³¼\]/;
        var match = text.match(regex);
        if (match) {
          return {
            score: parseInt(match[1], 10),
            comment: match[2]
          };
        }
        return null;
      }

      function renderFinalResult(result) {
        var riskClass = "risk-low";
        var riskLabel = "âœ… ì•ˆì „";
        
        if (result.score > 80) {
          riskClass = "risk-critical";
          riskLabel = "ğŸš¨ ë§¤ìš° ìœ„í—˜";
        } else if (result.score > 60) {
          riskClass = "risk-high";
          riskLabel = "âš ï¸ ë†’ì€ ìœ„í—˜";
        } else if (result.score > 40) {
          riskClass = "risk-medium";
          riskLabel = "âš ï¸ ì¤‘ê°„ ìœ„í—˜";
        } else if (result.score > 20) {
          riskClass = "risk-medium";
          riskLabel = "âš¡ ë‚®ì€ ìœ„í—˜";
        }

        return '<div class="final-result">' +
          '<div class="risk-label">' + riskLabel + '</div>' +
          '<div class="risk-score ' + riskClass + '">' + result.score + '<span style="font-size: 0.4em; opacity: 0.7;">/100</span></div>' +
          '<div class="risk-comment">"' + escapeHtml(result.comment) + '"</div>' +
        '</div>';
      }

      function escapeHtml(text) {
        var div = document.createElement("div");
        div.textContent = text;
        return div.innerHTML;
      }
    })();
  </script>
</body>
</html>
