<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ÏΩîÎìú Î≥¥Ïïà Î∂ÑÏÑùÍ∏∞</title>
  <link rel="icon" type="image/png" href="https://i.imgur.com/2MkyDCh.png">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    /* ========================================
       CSS Variables - Design System
    ======================================== */
    :root {
      /* Primary Colors */
      --primary-50: #eef6ff;
      --primary-100: #b9d6fd;
      --primary-500: #007BFF;
      --primary-600: #005BDD;
      --primary-700: #193694;
      
      /* Secondary Colors */
      --secondary-50: #e3ffe3;
      --secondary-500: #00d200;
      --secondary-600: #00a100;
      
      /* Neutral Colors */
      --white: #ffffff;
      --gray-50: #fafafa;
      --gray-100: #f5f5f5;
      --gray-200: #e8e8e8;
      --gray-300: #d6d6d6;
      --gray-400: #a6a6a6;
      --gray-500: #757575;
      --gray-600: #575757;
      --gray-700: #454545;
      --gray-800: #2b2b2b;
      --gray-900: #1c1c1c;
      --black: #000000;
      
      /* Semantic Colors */
      --success: #00ef38;
      --warning: #ffdd00;
      --error: #df0013;
      --info: #c9c9c9;
      
      /* Typography */
      --font-primary: "CloudSansCode", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      --font-mono: 'Fira Code', 'Monaco', 'Menlo', monospace;
      
      /* Font Sizes */
      --text-display: 72px;
      --text-h1: 56px;
      --text-h2: 36px;
      --text-h3: 28px;
      --text-h4: 24px;
      --text-h5: 20px;
      --text-h6: 18px;
      --text-body-xl: 20px;
      --text-body-lg: 30px;
      --text-body: 22px;
      --text-body-sm: 16px;
      --text-caption: 12px;
      
      /* Font Weights */
      --font-light: 300;
      --font-regular: 400;
      --font-medium: 500;
      --font-semibold: 600;
      --font-bold: 700;
      --font-extrabold: 800;
      
      /* Spacing */
      --space-xs: 4px;
      --space-sm: 8px;
      --space-md: 16px;
      --space-lg: 24px;
      --space-xl: 32px;
      --space-2xl: 48px;
      --space-3xl: 64px;
      --space-4xl: 80px;
      --space-5xl: 96px;
      --space-6xl: 128px;
      
      /* Shadows (Hard Shadow - Neobrutalism) */
      --shadow-xs: 8px 8px 0px rgba(0,0,0,0.2);
      --shadow-sm: 2px 2px 0px rgba(0,0,0,0.2);
      --shadow-md: 4px 4px 0px rgba(0,0,0,0.2);
      --shadow-lg: 10px 10px 0px rgba(0,0,0,0.2);
      --shadow-xl: 20px 20px 0px rgba(0,0,0,0.2);
      --shadow-2xl: 25px 25px 0px rgba(0,0,0,0.2);
      
      /* Border Radius */
      --radius-sm: 14px;
      --radius-md: 20px;
      --radius-lg: 26px;
      --radius-xl: 30px;
      --radius-full: 9999px;
      
      /* Transitions */
      --duration-fast: 0.15s;
      --duration-normal: 0.3s;
      --duration-slow: 0.5s;
      --easing: ease;
      
      /* Layout */
      --container-max-width: 1280px;
      --container-padding: var(--space-xl);
      --navbar-height: 72px;
    }
    
    /* Custom Font */
    @font-face {
      font-family: 'CloudSansCode';
      src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/2408@1.0/goorm-sans-code.woff2') format('woff2');
      font-weight: 100 900;
      font-display: swap;
    }

    /* ========================================
       Reset & Base
    ======================================== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* Accessibility - Focus Visible */
    :focus-visible {
      outline: 3px solid var(--primary-500);
      outline-offset: 2px;
    }

    /* Reduced Motion */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        transition-duration: 0.01ms !important;
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
      }
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: var(--font-primary);
      font-size: var(--text-body);
      font-weight: var(--font-regular);
      line-height: 1.6;
      background: var(--gray-50);
      color: var(--gray-800);
      min-height: 100vh;
    }

    /* ========================================
       Utility Classes
    ======================================== */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    .container {
      max-width: var(--container-max-width);
      margin: 0 auto;
      padding: 0 var(--container-padding);
    }

    /* ========================================
       Navigation Bar
    ======================================== */
    .navbar {
      position: sticky;
      top: 0;
      left: 0;
      right: 0;
      height: var(--navbar-height);
      background: var(--white);
      box-shadow: var(--shadow-xs);
      z-index: 100;
      display: flex;
      align-items: center;
    }

    .navbar .container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
    }

    .navbar-logo {
      font-size: var(--text-h4);
      font-weight: var(--font-bold);
      color: var(--primary-500);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    .navbar-logo:hover {
      color: var(--primary-600);
    }

    .navbar-nav {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      list-style: none;
    }

    .navbar-link {
      padding: var(--space-sm) var(--space-md);
      font-size: var(--text-body);
      font-weight: var(--font-bold);
      color: var(--gray-600);
      text-decoration: none;
      border-radius: var(--radius-sm);
      transition: all var(--duration-fast) var(--easing);
    }

    .navbar-link:hover,
    .navbar-link.active {
      color: var(--primary-500);
    }

    /* ========================================
       Hero Section
    ======================================== */
    .hero {
      padding: var(--space-4xl) 0;
      text-align: center;
    }

    .hero-title {
      font-size: var(--text-h1);
      font-weight: var(--font-extrabold);
      color: var(--gray-900);
      margin-bottom: var(--space-md);
      line-height: 1.1;
    }

    .hero-title .highlight {
      color: var(--primary-500);
      position: relative;
    }

    .hero-subtitle {
      font-size: var(--text-body-lg);
      color: var(--gray-500);
      max-width: 700px;
      margin: 0 auto var(--space-2xl);
    }

    /* ========================================
       Alert / Warning Banner
    ======================================== */
    .alert {
      padding: var(--space-md);
      border-radius: var(--radius-md);
      font-size: var(--text-body);
      margin-bottom: var(--space-lg);
      display: flex;
      align-items: flex-start;
      gap: var(--space-md);
    }

    .alert-warning {
      background: #f3c81e;
      box-shadow: 8px 8px 0px #dbac2c;
      color: var(--gray-900);
    }

    .alert-info {
      background: #b9b9b9;
      box-shadow: 8px 8px 0px #767676;
      color: var(--white);
    }

    .alert-icon {
      font-size: var(--text-h4);
      flex-shrink: 0;
    }

    .alert-content {
      flex: 1;
    }

    .alert-title {
      font-weight: var(--font-bold);
      margin-bottom: var(--space-xs);
    }

    /* ========================================
       Main Layout
    ======================================== */
    .main-section {
      padding: var(--space-2xl) 0 var(--space-4xl);
    }

    .main-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-lg);
    }

    /* ========================================
       Cards
    ======================================== */
    .card {
      background: var(--white);
      border: 1px solid var(--gray-200);
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      box-shadow: var(--shadow-sm);
      transition: all var(--duration-slow) var(--easing);
    }

    .card:hover {
      box-shadow: var(--shadow-lg);
      transform: translateY(-10px);
    }

    .card-highlight {
      border: 5px solid var(--primary-500);
    }

    .card-static {
      transition: none;
    }

    .card-static:hover {
      transform: none;
      box-shadow: var(--shadow-sm);
    }

    .card-header {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      margin-bottom: var(--space-md);
    }

    .card-icon {
      font-size: var(--text-h3);
    }

    .card-title {
      font-size: var(--text-h3);
      font-weight: var(--font-semibold);
      color: var(--gray-800);
    }

    /* ========================================
       Buttons
    ======================================== */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-sm);
      padding: 10px 20px;
      font-family: var(--font-primary);
      font-size: var(--text-body);
      font-weight: var(--font-semibold);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all var(--duration-normal) var(--easing);
      text-decoration: none;
      border: none;
    }

    .btn-primary {
      background: var(--primary-500);
      color: var(--white);
      box-shadow: var(--shadow-xs);
    }

    .btn-primary:hover:not(:disabled) {
      background: var(--primary-600);
      box-shadow: var(--shadow-sm);
      transform: translateY(6px);
    }

    .btn-primary:active:not(:disabled) {
      background: var(--primary-700);
      transform: translateY(8px);
      box-shadow: 0px 0px 0px rgba(0,0,0,0.2);
    }

    .btn-secondary {
      background: transparent;
      color: var(--primary-500);
      border: 2px solid var(--primary-500);
      padding: 10px 22px;
    }

    .btn-secondary:hover:not(:disabled) {
      box-shadow: var(--shadow-xs);
      transform: translateY(-8px);
    }

    .btn-lg {
      padding: 16px 32px;
      font-size: var(--text-body-lg);
    }

    .btn-sm {
      padding: 8px 16px;
      font-size: var(--text-body-sm);
    }

    .btn-full {
      width: 100%;
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    /* ========================================
       Form Elements
    ======================================== */
    .form-group {
      margin-bottom: var(--space-md);
    }

    .form-label {
      display: block;
      font-size: var(--text-body-sm);
      font-weight: var(--font-semibold);
      color: var(--gray-700);
      margin-bottom: var(--space-sm);
    }

    .form-input,
    .form-textarea {
      width: 100%;
      background: var(--white);
      border: 1px solid var(--gray-300);
      border-radius: var(--radius-md);
      padding: 12px 16px;
      font-family: var(--font-mono);
      font-size: var(--text-body);
      color: var(--gray-900);
      transition: all var(--duration-normal) var(--easing);
    }

    .form-input::placeholder,
    .form-textarea::placeholder {
      color: var(--gray-400);
    }

    .form-input:focus,
    .form-textarea:focus {
      outline: none;
      box-shadow: var(--shadow-xs);
      transform: translateY(-8px);
      border-color: var(--primary-500);
    }

    .form-textarea {
      min-height: 300px;
      resize: vertical;
      line-height: 1.5;
    }

    /* ========================================
       Input Mode Toggle (Segment Control)
    ======================================== */
    .input-mode-toggle {
      display: flex;
      background: var(--gray-100);
      border-radius: var(--radius-md);
      padding: 4px;
      position: relative;
      margin-bottom: var(--space-lg);
    }

    .input-mode-toggle::before {
      content: '';
      position: absolute;
      top: 4px;
      left: 4px;
      width: calc(50% - 4px);
      height: calc(100% - 8px);
      background: var(--white);
      border-radius: calc(var(--radius-md) - 4px);
      box-shadow: var(--shadow-sm);
      transition: transform var(--duration-normal) cubic-bezier(0.4, 0, 0.2, 1);
    }

    .input-mode-toggle.mode-direct::before {
      transform: translateX(100%);
    }

    .toggle-btn {
      flex: 1;
      padding: var(--space-sm) var(--space-md);
      font-family: var(--font-primary);
      font-size: var(--text-body);
      font-weight: var(--font-semibold);
      color: var(--gray-500);
      background: transparent;
      border: none;
      border-radius: calc(var(--radius-md) - 4px);
      cursor: pointer;
      position: relative;
      z-index: 1;
      transition: color var(--duration-normal) var(--easing);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-sm);
    }

    .toggle-btn:hover {
      color: var(--gray-700);
    }

    .toggle-btn.active {
      color: var(--primary-600);
    }

    .toggle-btn-icon {
      font-size: var(--text-h5);
    }

    /* ========================================
       Input Panels Container
    ======================================== */
    .input-panels-container {
      position: relative;
    }

    .input-panel {
      display: none;
      opacity: 0;
      transform: translateY(10px);
      transition: opacity var(--duration-normal) var(--easing), 
                  transform var(--duration-normal) var(--easing);
    }

    .input-panel.active {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }

    /* ========================================
       File Upload
    ======================================== */
    .file-upload {
      padding: var(--space-2xl) var(--space-lg);
      border: 2px dashed var(--gray-300);
      border-radius: var(--radius-md);
      text-align: center;
      cursor: pointer;
      transition: all var(--duration-normal) var(--easing);
      min-height: 300px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .file-upload:hover,
    .file-upload:focus {
      border-color: var(--primary-500);
      background: var(--primary-50);
      box-shadow: var(--shadow-xs);
      transform: translateY(-8px);
      outline: none;
    }

    .file-upload input {
      display: none;
    }

    .file-upload-icon {
      font-size: var(--text-h2);
      margin-bottom: var(--space-sm);
    }

    .file-upload-text {
      font-size: var(--text-body);
      color: var(--gray-700);
      margin-bottom: var(--space-xs);
    }

    .file-upload-hint {
      font-size: var(--text-body-sm);
      color: var(--gray-400);
    }

    /* File list display */
    .file-list {
      margin-top: var(--space-md);
      text-align: left;
      width: 100%;
      max-width: 400px;
    }

    .file-list-item {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      padding: var(--space-sm) var(--space-md);
      background: var(--white);
      border: 1px solid var(--gray-200);
      border-radius: var(--radius-sm);
      margin-bottom: var(--space-xs);
      font-size: var(--text-body-sm);
    }

    .file-list-item-icon {
      color: var(--success);
    }

    .file-list-item-name {
      flex: 1;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    /* ========================================
       Result Panel
    ======================================== */
    .result-panel {
      min-height: 500px;
      display: flex;
      flex-direction: column;
    }

    .result-content {
      flex: 1;
      background: var(--gray-100);
      border-radius: var(--radius-md);
      padding: var(--space-md);
      overflow-y: auto;
      font-size: var(--text-body-sm);
      line-height: 1.7;
      max-height: 500px;
    }

    .result-content::-webkit-scrollbar {
      width: 8px;
    }

    .result-content::-webkit-scrollbar-track {
      background: var(--gray-200);
      border-radius: var(--radius-sm);
    }

    .result-content::-webkit-scrollbar-thumb {
      background: var(--gray-400);
      border-radius: var(--radius-sm);
    }

    .result-content::-webkit-scrollbar-thumb:hover {
      background: var(--gray-500);
    }

    /* ========================================
       Thinking Block
    ======================================== */
    .thinking-block {
      background: var(--primary-50);
      border: 4px solid var(--primary-500);
      border-radius: var(--radius-sm);
      padding: var(--space-md);
      margin-bottom: var(--space-md);
    }

    .thinking-label {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      font-weight: var(--font-bold);
      color: var(--primary-600);
      margin-bottom: var(--space-sm);
    }

    .thinking-content {
      color: var(--gray-600);
      font-style: italic;
      white-space: pre-wrap;
      word-break: break-word;
    }

    /* ========================================
       Answer Block
    ======================================== */
    .answer-block {
      color: var(--gray-800);
      white-space: pre-wrap;
      word-break: break-word;
    }

    /* ========================================
       Final Result
    ======================================== */
    .final-result {
      margin-top: var(--space-lg);
      padding: var(--space-xl);
      background: var(--white);
      border-radius: var(--radius-lg);
      text-align: center;
      border: 3px solid var(--gray-200);
    }

    .risk-label {
      font-size: var(--text-h5);
      font-weight: var(--font-semibold);
      margin-bottom: var(--space-sm);
    }

    .risk-score {
      font-size: var(--text-display);
      font-weight: var(--font-extrabold);
      margin: var(--space-sm) 0;
      font-family: var(--font-mono);
    }

    .risk-low { 
      color: var(--success); 
    }
    
    .risk-medium { 
      color: var(--warning); 
    }
    
    .risk-high { 
      color: #e55050;
    }
    
    .risk-critical { 
      color: var(--error); 
    }

    .risk-comment {
      font-size: var(--text-body);
      color: var(--gray-500);
      font-style: italic;
    }

    /* ========================================
       Empty State
    ======================================== */
    .empty-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      min-height: 300px;
      color: var(--gray-400);
    }

    .empty-state-icon {
      font-size: 80px;
      margin-bottom: var(--space-md);
    }

    .empty-state-text {
      font-size: var(--text-body);
    }

    /* ========================================
       Loading States
    ======================================== */
    .loading {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-md);
      padding: var(--space-2xl);
      color: var(--gray-500);
    }

    .spinner {
      width: 28px;
      height: 28px;
      border: 4px solid var(--primary-100);
      border-top-color: var(--primary-500);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* ========================================
       Badges
    ======================================== */
    .badge {
      display: inline-flex;
      align-items: center;
      padding: var(--space-xs) 12px;
      border-radius: var(--radius-full);
      font-size: var(--text-body-sm);
      font-weight: var(--font-medium);
    }

    .badge-primary {
      background: var(--primary-500);
      color: var(--white);
    }

    .badge-success {
      background: #29c54d;
      color: var(--white);
    }

    .badge-warning {
      background: #f3c81e;
      color: var(--white);
    }

    .badge-error {
      background: #e12e2e;
      color: var(--white);
    }

    /* ========================================
       Footer
    ======================================== */
    .footer {
      padding: var(--space-xl) 0;
      text-align: center;
      color: var(--gray-500);
      font-size: var(--text-body-sm);
      border-top: 1px solid var(--gray-200);
      margin-top: var(--space-3xl);
    }

    /* ========================================
       Error Message
    ======================================== */
    .error-message {
      background: #fef2f2;
      border: 2px solid var(--error);
      border-radius: var(--radius-md);
      padding: var(--space-lg);
      color: var(--error);
      text-align: center;
    }

    /* ========================================
       Responsive Design
    ======================================== */
    @media (max-width: 1023px) {
      :root {
        --text-h1: 42px;
        --text-h2: 32px;
        --text-body-lg: 24px;
      }

      .main-grid {
        grid-template-columns: 1fr 1fr;
        gap: var(--space-md);
      }
    }

    @media (max-width: 639px) {
      :root {
        --text-h1: 36px;
        --text-h2: 28px;
        --text-h3: 24px;
        --text-body-lg: 20px;
        --text-body: 18px;
        --container-padding: var(--space-md);
      }

      .navbar-nav {
        display: none;
      }

      .hero {
        padding: var(--space-2xl) 0;
      }

      .hero-subtitle {
        font-size: var(--text-body);
      }

      .main-grid {
        grid-template-columns: 1fr;
        gap: var(--space-lg);
      }

      .main-section {
        padding: var(--space-lg) 0 var(--space-2xl);
      }

      .result-panel {
        min-height: 400px;
      }

      .result-content {
        max-height: 400px;
      }

      .form-textarea {
        min-height: 200px;
      }

      .risk-score {
        font-size: 56px;
      }

      .final-result {
        padding: var(--space-lg);
      }

      .card {
        padding: var(--space-md);
      }

      .card:hover {
        transform: none;
      }

      .toggle-btn {
        font-size: var(--text-body-sm);
        padding: var(--space-sm);
      }

      .toggle-btn-icon {
        font-size: var(--text-body);
      }
    }
  </style>
</head>
<body>

  <main>
    <!-- Main Content -->
    <section class="main-section" id="analyzer">
      <div class="hero">
        <h1 class="hero-title">AIÎ•º Ïù¥Ïö©Ìïú <span class="highlight">ÏΩîÎìú Î≥¥Ïïà Î∂ÑÏÑùÍ∏∞</span></h1>
      </div>
      <div class="container">
        <div class="main-grid">
          <!-- Input Panel -->
          <div class="card card-highlight card-static">
            <div class="card-header">
              <h2 class="card-title">ÏΩîÎìú ÏûÖÎ†•</h2>
            </div>
            
            <!-- Input Mode Toggle -->
            <div class="input-mode-toggle" id="inputModeToggle">
              <button type="button" class="toggle-btn active" id="toggleFile" aria-pressed="true">
                <span class="toggle-btn-icon">üìÅ</span>
                <span>ÌååÏùº Ï≤®Î∂Ä</span>
              </button>
              <button type="button" class="toggle-btn" id="toggleDirect" aria-pressed="false">
                <span class="toggle-btn-icon">‚úèÔ∏è</span>
                <span>ÏßÅÏ†ë ÏûÖÎ†•</span>
              </button>
            </div>

            <!-- Input Panels -->
            <div class="input-panels-container">
                <!-- File Upload Panel -->
                <div class="input-panel active" id="filePanel">
                  <div 
                    class="file-upload" 
                    tabindex="0" 
                    role="button" 
                    aria-label="ÌååÏùº ÏóÖÎ°úÎìú" 
                    id="fileUploadArea"
                  >
                    <input 
                      type="file" 
                      id="fileInput" 
                      accept=".js,.ts,.jsx,.tsx,.py,.php,.html,.css,.json,.txt" 
                      aria-label="ÏΩîÎìú ÌååÏùº ÏÑ†ÌÉù"
                      multiple
                    >
                    <div class="file-upload-icon">üìÅ</div>
                    <div class="file-upload-text" id="fileUploadText">ÌååÏùºÏùÑ ÎìúÎûòÍ∑∏ÌïòÍ±∞ÎÇò ÌÅ¥Î¶≠ÌïòÏó¨ ÏóÖÎ°úÎìú</div>
                    <div class="file-upload-hint">.js, .ts, .jsx, .tsx, .py, .php, .html, .css, .json, .txt, .rs, .cpp, .go, .rb, .cs, .yaml, .yml</div>
                    <div class="file-list" id="fileList"></div>
                  </div>
                </div>

                <!-- Direct Input Panel -->
                <div class="input-panel" id="directPanel">
                  <div class="form-group" style="margin-bottom: 0;">
                    <label for="codeInput" class="sr-only">Î∂ÑÏÑùÌï† ÏΩîÎìú ÏûÖÎ†•...</label>
                    <textarea 
                      id="codeInput" 
                      class="form-textarea" 
                      placeholder="Î∂ÑÏÑùÌï† ÏΩîÎìúÎ•º ÏßÅÏ†ë ÏûÖÎ†•ÌïòÏÑ∏Ïöî..."
                      aria-label="Î∂ÑÏÑùÌï† ÏΩîÎìúÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî."
                      style="min-height: 300px;"
                    ></textarea>
                  </div>
                </div>
            </div>

            <button class="btn btn-primary btn-lg btn-full" id="analyzeBtn" style="margin-top: var(--space-lg);">
              <span>Î∂ÑÏÑù ÏãúÏûë</span>
            </button>
          </div>

          <!-- Result Panel -->
          <div class="card result-panel card-static">
            <div class="card-header">
              <h2 class="card-title">Î∂ÑÏÑù Í≤∞Í≥º</h2>
            </div>
            <div class="result-content" id="resultContent" aria-live="polite" aria-atomic="false">
              <div class="empty-state">
                <div class="empty-state-icon">ü§î</div>
                <div class="empty-state-text">Î∂ÑÏÑù ÏãúÏûë Î≤ÑÌäºÏùÑ ÎàåÎü¨ ÏΩîÎìúÎ•º Î∂ÑÏÑùÌï¥ Î≥¥ÏÑ∏Ïöî.</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>


  <script>
    (function() {
      // DOM Elements
      var codeInput = document.getElementById("codeInput");
      var fileInput = document.getElementById("fileInput");
      var analyzeBtn = document.getElementById("analyzeBtn");
      var resultContent = document.getElementById("resultContent");
      var fileUploadArea = document.getElementById("fileUploadArea");
      var inputModeToggle = document.getElementById("inputModeToggle");
      var toggleFile = document.getElementById("toggleFile");
      var toggleDirect = document.getElementById("toggleDirect");
      var filePanel = document.getElementById("filePanel");
      var directPanel = document.getElementById("directPanel");
      var fileList = document.getElementById("fileList");

      // State management
      var currentMode = "file"; // "file" or "direct"
      var fileContent = ""; // Stores file upload content
      var directContent = ""; // Stores direct input content
      var loadedFiles = []; // Stores loaded file names

      // Mode toggle handlers
      function setMode(mode) {
        currentMode = mode;
        
        // Update toggle buttons and panels
        if (mode === "file") {
          toggleFile.classList.add("active");
          toggleFile.setAttribute("aria-pressed", "true");
          toggleDirect.classList.remove("active");
          toggleDirect.setAttribute("aria-pressed", "false");
          inputModeToggle.classList.remove("mode-direct");
          filePanel.classList.add("active");
          directPanel.classList.remove("active");
        } else {
          toggleDirect.classList.add("active");
          toggleDirect.setAttribute("aria-pressed", "true");
          toggleFile.classList.remove("active");
          toggleFile.setAttribute("aria-pressed", "false");
          inputModeToggle.classList.add("mode-direct");
          directPanel.classList.add("active");
          filePanel.classList.remove("active");
        }
      }

      toggleFile.addEventListener("click", function() {
        // Save direct input content before switching
        directContent = codeInput.value;
        setMode("file");
      });

      toggleDirect.addEventListener("click", function() {
        setMode("direct");
        // Restore saved direct input content
        codeInput.value = directContent;
      });

      // Save direct input content on change
      codeInput.addEventListener("input", function() {
        directContent = codeInput.value;
      });

      // File upload click handler
      fileUploadArea.addEventListener("click", function(e) {
        // Prevent click on file list items from triggering file input
        if (e.target.closest(".file-list")) return;
        fileInput.click();
      });

      // Keyboard accessibility for file upload
      fileUploadArea.addEventListener("keypress", function(e) {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          fileInput.click();
        }
      });

      // Function to update file list UI
      function updateFileListUI() {
        if (loadedFiles.length === 0) {
          fileList.innerHTML = "";
          document.getElementById("fileUploadText").textContent = "ÌååÏùºÏùÑ ÎìúÎûòÍ∑∏ÌïòÍ±∞ÎÇò ÌÅ¥Î¶≠ÌïòÏó¨ Ï≤®Î∂Ä";
          return;
        }

        var html = loadedFiles.map(function(name) {
          return '<div class="file-list-item">' +
            '<span class="file-list-item-icon">‚úÖ</span>' +
            '<span class="file-list-item-name">' + escapeHtml(name) + '</span>' +
          '</div>';
        }).join("");
        
        fileList.innerHTML = html;
        
        if (loadedFiles.length === 1) {
          document.getElementById("fileUploadText").textContent = "‚úÖ 1Í∞ú ÌååÏùº Ï≤®Î∂ÄÎê®";
        } else {
          document.getElementById("fileUploadText").textContent = "‚úÖ " + loadedFiles.length + "Í∞ú ÌååÏùº Ï≤®Î∂ÄÎê®";
        }
      }

      // Function to process multiple files
      function processFiles(files) {
        if (!files || files.length === 0) return;
        
        var fileArray = Array.from(files);
        
        // Read all files and combine their contents
        Promise.all(fileArray.map(function(file) {
          return file.text().then(function(text) {
            return {
              name: file.name,
              content: text
            };
          });
        })).then(function(results) {
          // Combine all file contents with file name separators
          var combinedContent = results.map(function(result) {
            return "// ===== " + result.name + " =====\n" + result.content;
          }).join("\n\n");
          
          fileContent = combinedContent;
          loadedFiles = results.map(function(r) { return r.name; });
          
          // Update UI
          updateFileListUI();
        });
      }

      // File input change handler
      fileInput.addEventListener("change", function(e) {
        processFiles(e.target.files);
      });

      // Drag and drop handlers
      fileUploadArea.addEventListener("dragover", function(e) {
        e.preventDefault();
        fileUploadArea.style.borderColor = "var(--primary-500)";
        fileUploadArea.style.background = "var(--primary-50)";
      });

      fileUploadArea.addEventListener("dragleave", function() {
        fileUploadArea.style.borderColor = "";
        fileUploadArea.style.background = "";
      });

      fileUploadArea.addEventListener("drop", function(e) {
        e.preventDefault();
        fileUploadArea.style.borderColor = "";
        fileUploadArea.style.background = "";
        processFiles(e.dataTransfer.files);
      });

      // Analyze button click handler
      analyzeBtn.addEventListener("click", function() {
        analyzeCode();
      });

      function analyzeCode() {
        // Get code based on current mode
        var code = "";
        if (currentMode === "file") {
          code = fileContent.trim();
        } else {
          code = directContent.trim();
        }
        
        if (!code) {
          if (currentMode === "file") {
            alert("Î∂ÑÏÑùÌï† ÌååÏùºÏùÑ ÏóÖÎ°úÎìúÌï¥Ï£ºÏÑ∏Ïöî.");
          } else {
            alert("Î∂ÑÏÑùÌï† ÏΩîÎìúÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.");
          }
          return;
        }

        analyzeBtn.disabled = true;
        analyzeBtn.innerHTML = '<span class="spinner"></span> <span>Î∂ÑÏÑù Ï§ë...</span>';
        
        resultContent.innerHTML = '<div class="loading"><span class="spinner"></span> <span>AIÍ∞Ä ÏΩîÎìúÎ•º Î∂ÑÏÑùÌïòÍ≥† ÏûàÏäµÎãàÎã§...</span></div>';

        var reasoningText = "";
        var answerText = "";

        fetch("/api/analyze", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ code: code })
        })
        .then(function(response) {
          if (!response.ok) {
            return response.json().then(function(err) {
              throw new Error(err.error || "Î∂ÑÏÑù Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.");
            });
          }
          return response;
        })
        .then(function(response) {
          var reader = response.body.getReader();
          var decoder = new TextDecoder();
          var buffer = "";

          function processStream() {
            return reader.read().then(function(result) {
              if (result.done) {
                updateResult(reasoningText, answerText, true);
                return;
              }

              buffer += decoder.decode(result.value, { stream: true });
              var lines = buffer.split("\n");
              buffer = lines.pop() || "";

              for (var i = 0; i < lines.length; i++) {
                var line = lines[i];
                if (line.indexOf("data: ") === 0) {
                  var data = line.slice(6);
                  if (data === "[DONE]") continue;
                  
                  try {
                    var parsed = JSON.parse(data);
                    if (parsed.error) {
                      throw new Error(parsed.error);
                    }
                    if (parsed.reasoning) {
                      reasoningText += parsed.reasoning;
                    }
                    if (parsed.content) {
                      answerText += parsed.content;
                    }
                    updateResult(reasoningText, answerText, false);
                  } catch (e) {
                    if (e.message && e.message !== "Unexpected end of JSON input") {
                      throw e;
                    }
                  }
                }
              }

              return processStream();
            });
          }

          return processStream();
        })
        .catch(function(error) {
          resultContent.innerHTML = '<div class="error-message">‚ùå ' + escapeHtml(error.message) + '</div>';
        })
        .finally(function() {
          analyzeBtn.disabled = false;
          analyzeBtn.innerHTML = '<span>Î∂ÑÏÑù ÏãúÏûë</span>';
        });
      }

      function updateResult(reasoning, answer, isFinal) {
        var html = "";

        if (reasoning) {
          html += '<div class="thinking-block">';
          html += '<div class="thinking-label"> <span>Ï∂îÎ°† Í≥ºÏ†ï</span></div>';
          html += '<div class="thinking-content">' + escapeHtml(reasoning) + '</div>';
          html += '</div>';
        }

        if (answer) {
          html += '<div class="answer-block">' + escapeHtml(answer) + '</div>';
        }

        if (isFinal && answer) {
          var finalResult = parseFinalResult(answer);
          if (finalResult) {
            html += renderFinalResult(finalResult);
          }
        }

        resultContent.innerHTML = html || '<div class="loading"><span class="spinner"></span> <span>Î∂ÑÏÑù Ï§ë...</span></div>';
        resultContent.scrollTop = resultContent.scrollHeight;
      }

      function parseFinalResult(text) {
        var regex = /\[ÏµúÏ¢Ö Í≤∞Í≥º\][\s\S]*?ÏïÖÏÑ±ÏΩîÎìúÏùº Í∞ÄÎä•ÏÑ±:\s*(\d+)\/100[\s\S]*?"([^"]+)"[\s\S]*?\[\/ÏµúÏ¢Ö Í≤∞Í≥º\]/;
        var match = text.match(regex);
        if (match) {
          return {
            score: parseInt(match[1], 10),
            comment: match[2]
          };
        }
        return null;
      }

      function renderFinalResult(result) {
        var riskClass = "risk-low";
        var riskLabel = "‚úÖ ÏúÑÌóòÌïòÏßÄ ÏïäÏùå";
        
        if (result.score > 80) {
          riskClass = "risk-critical";
          riskLabel = "‚õî Îß§Ïö∞ ÏúÑÌóò";
        } else if (result.score > 60) {
          riskClass = "risk-high";
          riskLabel = "‚ö†Ô∏è ÎÜíÏùÄ ÏúÑÌóò";
        } else if (result.score > 40) {
          riskClass = "risk-medium";
          riskLabel = "‚ÄºÔ∏è Ï§ëÍ∞Ñ ÏúÑÌóò";
        } else if (result.score > 20) {
          riskClass = "risk-medium";
          riskLabel = "‚òëÔ∏è ÎÇÆÏùÄ ÏúÑÌóò";
        }

        return '<div class="final-result">' +
          '<div class="risk-label">' + riskLabel + '</div>' +
          '<div class="risk-score ' + riskClass + '">' + result.score + '<span style="font-size: 0.4em; opacity: 0.7;">/100</span></div>' +
          '<div class="risk-comment">"' + escapeHtml(result.comment) + '"</div>' +
        '</div>';
      }

      function escapeHtml(text) {
        var div = document.createElement("div");
        div.textContent = text;
        return div.innerHTML;
      }
    })();
  </script>
</body>
</html>
